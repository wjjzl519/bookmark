<idea-plugin>
    <id>com.dawang.bookmark-plugin</id>
    <name>Dawang Bookmark</name>
    <version>1.0.2</version>
    <vendor email="zlwjj1001@gmail.com" url="https://www.dawang.com">大王不巡山</vendor>

    <description><![CDATA[
An IntelliJ IDEA plugin for bookmarking selected content from editors and console output. This plugin helps you save and organize important code snippets, console logs, and text selections with labels and notes.

Features:
<ul>
  <li>Bookmark selected text from editors</li>
  <li>Bookmark console output content</li>
  <li>Organize bookmarks with labels and categories</li>
  <li>View bookmarks sorted by time</li>
  <li>Tool window to view all bookmarks</li>
  <li>Navigate to source location</li>
  <li>Copy bookmark content</li>
  <li>Delete bookmark items</li>
</ul>

一个用于收藏编辑器和控制台内容的 IntelliJ IDEA 插件。支持标签分类管理、时间排序查看、跳转到源位置等功能。
    ]]></description>

    <change-notes><![CDATA[
    <h3>1.0.2</h3>
    <ul>
      <li>修复双击收藏记录时 IDE 崩溃的问题</li>
      <li>修复直接双击（未选中）时导致的闪退问题</li>
      <li>改进 JCEF 浏览器组件的异常处理，添加自动降级机制</li>
      <li>增强对话框创建的异常处理和空值检查</li>
      <li>优化双击事件处理，添加节点类型验证</li>
    </ul>
    
    <h3>1.0.0</h3>
    <ul>
      <li>初始版本：支持编辑器和控制台内容收藏</li>
      <li>支持标签分类和时间排序</li>
      <li>提供工具窗口查看收藏内容</li>
    </ul>
    ]]></change-notes>

    <!-- 兼容的IDE版本 -->
    <idea-version since-build="212" until-build="241.*"/>

    <!-- 插件依赖 -->
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- 注册工具窗口 -->
        <toolWindow 
            id="Bookmark" 
            secondary="true" 
            anchor="bottom" 
            icon="/icons/bookmark.svg"
            factoryClass="com.dawang.bookmark.ui.BookmarkToolWindowFactory"/>
        
        <!-- 注册应用级服务 -->
        <applicationService serviceImplementation="com.dawang.bookmark.service.BookmarkStateService"/>
        
        <!-- 注册通知组 -->
        <notificationGroup id="BookmarkPlugin" displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- 注册收藏Action -->
        <action 
            id="BookmarkAction" 
            class="com.dawang.bookmark.action.BookmarkAction"
            text="收藏选中内容" 
            description="收藏当前选中的文本内容"
            icon="/icons/bookmark.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <add-to-group group-id="ConsoleEditorPopupMenu" anchor="first"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt B"/>
        </action>
    </actions>
</idea-plugin>

